<!DOCTYPE html>
<html lang="en">
<head>
    <title>Quick Start - Stack SAGA</title>

    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="description" content="Stack SAGA Quick Start with spring boot microservice.">
    <meta name="author" content="Mafei">


    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="180x180" href="./../../../../../assets/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./../../../../../assets/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./../../../../../assets/fav/favicon-16x16.png">
    <link rel="manifest" href="./../../../../../assets/fav/site.webmanifest">
    <link rel="mask-icon" href="./../../../../../assets/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="apple-mobile-web-app-title" content="stacksaga">
    <meta name="application-name" content="stacksaga">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#28b76b">


    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap" rel="stylesheet">

    <!-- FontAwesome JS-->
    <script defer src="../../../../../assets/fontawesome/js/all.min.js"></script>

    <!-- Plugins CSS -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.2/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="../../../../../assets/plugins/simplelightbox/simple-lightbox.min.css">

    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="../../../../../assets/css/theme.css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LC0M1Q19EK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'G-LC0M1Q19EK');
    </script>
    <link rel="stylesheet" href="../../../../../assets/css/custom.css">


</head>

<body class="docs-page">
<header class="header fixed-top">
    <div class="branding docs-branding">
        <div class="container-fluid position-relative py-2">
            <div class="docs-logo-wrapper">
                <button id="docs-sidebar-toggler" class="docs-sidebar-toggler docs-sidebar-visible me-2 d-xl-none"
                        type="button">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>

                <div class="site-logo">
                    <a class="navbar-brand" href="../../../../../index.html">
                        <img src="../../../../../assets/images/StackSagaIcon.png"
                             alt="logo"/>
                        <span class="logo-text">Stack<span class="text-alt">SAGA</span></span>
                    </a>
                </div>

            </div><!--//docs-logo-wrapper-->
            <div class="docs-top-utilities d-flex justify-content-end align-items-center">
                <div class="top-search-box d-none d-lg-flex">
                    <!--<form class="search-form">
                        <input type="text" placeholder="Search the docs..." name="search"
                               class="form-control search-input"/>
                        <button type="submit" class="btn search-btn" value="Search"><i class="fas fa-search"></i>
                        </button>
                    </form>-->
                    <form class="search-form search-input">
                        <div class="form-group">
                            <select class="form-control" id="exampleFormControlSelect1">
                                <option selected>version 1.0.0</option>
                            </select>
                        </div>
                    </form>


                </div>

                <ul class="social-list list-inline mx-md-3 mx-lg-5 mb-0 d-none d-lg-flex">
                    <li class="list-inline-item"><a href="https://github.com/stacksaga"><i
                            class="fab fa-github fa-fw"></i></a></li>
                    <li class="list-inline-item"><a href="https://stackoverflow.com/questions/tagged/stacksaga"><i
                            class="fab fa-stack-overflow fa-fw"></i></a></li>

                </ul><!--//social-list-->

            </div><!--//docs-top-utilities-->
        </div><!--//container-->
    </div><!--//branding-->
</header><!--//header-->


<div class="docs-wrapper">
    <div id="docs-sidebar" class="docs-sidebar">
        <div class="top-search-box d-lg-none p-3">
            <form class="search-form">
                <input type="text" placeholder="Search the docs..." name="search" class="form-control search-input">
                <button type="submit" class="btn search-btn" value="Search"><i class="fas fa-search"></i></button>
            </form>
        </div>
        <nav id="docs-nav" class="docs-nav navbar">
            <ul class="section-items list-unstyled nav flex-column pb-3">
                <li class="nav-item section-title"><a class="nav-link scrollto active" href="#section-1"><span
                        class="theme-icon-holder me-2"><i class="fas fa-map-signs"></i></span>
                    Payment Service
                    Implementation</a></li>
                <li class="nav-item"><a class="nav-link scrollto" href="#overview">Overview</a></li>
                <li class="nav-item"><a class="nav-link scrollto" href="#creating-application">Creating application</a></li>
                <li class="nav-item"><a class="nav-link scrollto" href="#database">Database</a></li>
                <li class="nav-item"><a class="nav-link scrollto" href="#implementation">Implementation</a></li>
                <li class="nav-item"><a class="nav-link scrollto" href="#creating-entity">Creating Entity</a></li>
                <li class="nav-item"><a class="nav-link scrollto" href="#creating-repository">Creating Repository </a></li>
                <li class="nav-item"><a class="nav-link scrollto" href="#creating-service">Creating Service  </a></li>
                <li class="nav-item"><a class="nav-link scrollto" href="#creating-controller">Creating Controller   </a></li>
            </ul>

        </nav><!--//docs-nav-->
    </div><!--//docs-sidebar-->
    <div class="docs-content">
        <div class="container">
            <article class="docs-article" id="section-1">
                <header class="docs-header">
                    <div class="text-center" style="padding-bottom: 10px">
                        <div class="btn-group" role="group" aria-label="Basic example">
                            <a href="#" class="btn btn-primary">Imperative Way</a>
                            <a href="#" class="btn btn-light">Reactive Way</a>

                        </div>
                    </div>
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb" style="padding-left: 0 !important;">
                            <li class="breadcrumb-item"><a href="#">Home</a></li>
                            <li class="breadcrumb-item"><a href="#">Imperative</a></li>
                            <li class="breadcrumb-item"><a href="#">Mysql</a></li>
                            <li class="breadcrumb-item"><a href="#">1.0.0</a></li>
                            <li class="breadcrumb-item"><a href="#">example</a></li>
                            <li class="breadcrumb-item active" aria-current="page">payment-service implementation</li>
                        </ol>
                    </nav>
                    <h1 id="overview" class="docs-heading">Overview</h1>
                    <section class="docs-intro">
                        <p>
                            In the previous articles, we have successfully created the eureka-server,
                            the order-service and the user-service. now we are going to create one of next
                            microservices. the next service which
                            we are going to implement is payment-service. in the payment-service we want to have two
                            endpoints for execute the place-order according the use-case for now (for the example
                            without using stacksaga).
                        </p>
                        <p>The following endpoints will be created in this part</p>
                        <ul>
                            <li>
                                <span class="badge  bg-primary">POST</span>
                                <code>/payment-service/customer/make-payment</code>
                            </li>
                        </ul>
                    </section><!--//docs-intro-->


                </header>


                <section class="docs-section" id="item-1-5">
                    <h3 id="creating-application" class="section-heading">Creating user-service.</h3>
                    <p>
                        Visit to the spring initializer and create the project by adding the following dependencies.
                    </p>
                    <img class="img-fluid"
                         src="../../../../../assets/img/mysql/1.0/imperative/quick-start/stack-saga-example-payment-service-creating.jpeg"
                         alt="stacksaga e-store example creating payment-service"/>
                    <br>
                    <br>
                    <h4 id="database">Database</h4>
                    <p>There is one table called <code>ss_customer_payment</code> in th payment-service-db. it has
                        user's purchasing details.
                        (you don't want to creat the database manually. because, spring-data-jpa will create the
                        database and the tables when start the project.)
                    </p>

                    <img class="img-fluid"
                         src="../../../../../assets/img/mysql/1.0/imperative/payment-service-implementation/stacksaga-example-payment-service-database.png"
                         alt="stacksaga e-store payment-service database"/>
                    <br>
                    <br>
                    <h4 id="implementation">Implementation of payment-service</h4>
                    <br>
                    <h5>
                        Configuration properties
                    </h5>
                    <p>
                        same as the user-service, we have to put our properties in the <code>application.yml</code>
                        file.
                    </p>
                    <h6>application.yml</h6>
                    <small>
                        <b>payment-service >
                            src/main/resources/application.yml
                        </b>
                    </small>
                    <script src="https://gist.github.com/mafei-dev/80180057699459f79f6bbfeb96bcaecf.js"></script>
                    <br>
                    <br>
                    <h5>
                        Annotate the main class
                    </h5>

                    <p>for now, we have been using the only eureka client in this project. therefore, one and only
                        annotation for main class is <code>@EnableEurekaClient</code>.</p>
                    <small>
                        <b>payment-service >
                            org/mono/stacksaga/example/paymentservice/PaymentServiceApplication.java
                        </b>
                    </small>
                    <script src="https://gist.github.com/mafei-dev/2d2ead77c4f21c9bdf643f79d48042a5.js"></script>
                    <br>
                    <br>
                    <h5 id="creating-entity">
                        Entity classes
                    </h5>
                    <p>to access the database, we have to create the entity classes same as the before article. in the
                        payment-service microservice's database we have only one table called
                        <code>ss_customer_payment</code>.
                        let's create the <code>CustomerPaymentEntity.class</code></p>
                    <small>
                        <b>payment-service >
                            org/mono/stacksaga/example/paymentservice/entity/CustomerPayment.java
                        </b>
                    </small>
                    <script src="https://gist.github.com/mafei-dev/0a59f4d9d76f3309a2ad50b112907cfc.js"></script>
                    <p>* In the entity class, we have created an enum class to manage the payment-status.</p>
                    <br>
                    <br>
                    <h5 id="creating-repository">
                        Repository classes of payment-service
                    </h5>
                    <p>
                        To access the <code>CustomerPaymentEntity.class</code> we want to have a repository called
                        <code>CustomerPaymentRepository.class</code>
                    </p>
                    <h6>CustomerPaymentRepository.class</h6>
                    <small>
                        <b>user-service >
                            org/mono/stacksaga/example/paymentservice/repository/CustomerPaymentRepository.java
                        </b>
                    </small>
                    <script src="https://gist.github.com/mafei-dev/d8bdf4dcb13b68a5bd7d0de11b33b1d0.js"></script>
                    <p>for now, the repository has no any extra created methods. the default existing extended methods
                        are
                        enough to play the role. (the example with using stacksaga, more additional method will be
                        created.)
                    </p>
                    <br>
                    <br>
                    <h5 id="creating-service">
                        Service classes of the payment-service
                    </h5>

                    <p>
                        To access the <code>CustomerPaymentRepository.class</code> we want to have a service called
                        <code>CustomerPaymentService.class</code>. but before creating the service class we should have
                        a
                        model class (<code>PaymentSubmitModel.class</code>) to pass the data.
                    </p>

                    <h6>PaymentSubmitModel.class</h6>
                    <small>
                        <b>payment-service >
                            org/mono/stacksaga/example/paymentservice/model/PaymentSubmitModel.java
                        </b>
                    </small>
                    <script src="https://gist.github.com/mafei-dev/3b9ea04b6088fcb4e6a27d0880996c30.js"></script>
                    <br>
                    <br>
                    <p>let's creat the <code>CustomerPaymentService</code> class</p>
                    <br>
                    <h6>CustomerPaymentService.class</h6>
                    <small>
                        <b>user-service >
                            org/mono/stacksaga/example/paymentservice/service/CustomerPaymentService.java
                        </b>
                    </small>
                    <script src="https://gist.github.com/mafei-dev/2de8f490256b04c17d6a15e21369ab8b.js"></script>
                    <h5 id="creating-controller">
                        Controller classes of payment-service
                    </h5>

                    <p>now we are going to create the endpoints for make-payment. therefore, we will be creating
                        controller class called <code>CustomerPaymentController.java</code></p>

                    <p>before creating the controller class we are going to create the response DTO and request DTO
                        objects for transfer
                        the
                        data through the endpoint.</p>
                    <h6>MakePaymentRequestBody.class</h6>
                    <small>
                        <b>payment-service >
                            org/mono/stacksaga/example/paymentservice/dto/MakePaymentRequestBody.java
                        </b>
                    </small>
                    <script src="https://gist.github.com/mafei-dev/583a2bbd88450ffbc93cf50c2761cfc5.js"></script>
                    <br>
                    <br>
                    <h6>MakePaymentResponseBody.class</h6>
                    <small>
                        <b>payment-service >
                            org/mono/stacksaga/example/paymentservice/dto/MakePaymentResponseBody.java
                        </b>
                    </small>
                    <script src="https://gist.github.com/mafei-dev/a6813a7ca1506eb6cee15dd33e285cf0.js"></script>
                    <br>
                    <br>


                    <p>Now we are going to create our CustomerPaymentController class by using the response body and
                        request body classes
                        that created above.</p>
                    <h6>CustomerPaymentController.class</h6>
                    <small>
                        <b>payment-service >
                            org/mono/stacksaga/example/paymentservice/controller/CustomerPaymentController.java
                        </b>
                    </small>
                    <script src="https://gist.github.com/mafei-dev/9c5eb416594886b5f50dcaba42fbe477.js"></script>
                    <br>
                    <br>

                    <p>here is the endpoint-testing by using api-gateway and eureka service with payment-service.</p>
                    <p>The url will be connected like this;
                        <br>
                        <br>
                        <b><code>{API_GATEWAY_HOST}/{SERVICE_NAME}/{MAPPING}</code></b>
                        <br>
                        <br>
                        <code>http://localhost:8080/payment-service/customer/make-payment</code>
                    </p>
                    <br>
                    <br>
                    <img class="img-fluid"
                         src="../../../../../assets/img/mysql/1.0/imperative/payment-service-implementation/endpoint-makepayment.png"
                         alt="stacksaga e-store payment-service make payment endpoint"/>
                    <br>

                    <p>Check the health by using the Curl.</p>
                    <script src="https://gist.github.com/mafei-dev/f1c9f92ce6a83ddb67f4c3333f7697dd.js"></script>
                    <p><b>After all, The user-server project folder and file structure like below.</b></p>
                    <br>
                    <br>
                    <pre style="background-color: #f5fcf7">
└───main
    ├───java
    │   └───org
    │       └───mono
    │           └───stacksaga
    │               └───example
    │                   └───paymentservice
    │                       │   PaymentServiceApplication.java
    │                       │
    │                       ├───controller
    │                       │       CustomerPaymentController.java
    │                       │
    │                       ├───dto
    │                       │       MakePaymentRequestBody.java
    │                       │       MakePaymentResponseBody.java
    │                       │
    │                       ├───entity
    │                       │       CustomerPaymentEntity.java
    │                       │
    │                       ├───model
    │                       │       PaymentSubmitModel.java
    │                       │
    │                       ├───repository
    │                       │       CustomerPaymentRepository.java
    │                       │
    │                       └───service
    │                               CustomerPaymentService.java
    │
    └───resources
        │   application.yml
        │
        ├───static
        └───templates

                    </pre>

                </section>


                <div>
                    Previous <a href="example-user-service-implementation.html">Implementation of user-service</a>
                    <br>
                    Next <a href="example-delivery-service-implementation.html">Implementation of delivery-service</a>
                </div>


                <section class="docs-section">
                    <h2>Example series</h2>
                    <ul>
                        <li>
                            <p>
                                Microservice example without using StackSAGA (Imperative way)
                            </p>
                            <ul>

                                <li>
                                    <p>
                                        <a href="./quick-start.html" target="_blank">
                                            Introduction
                                        </a>
                                    </p>
                                </li>

                                <li>
                                    <p>
                                        <a href="./example-order-service-implementation.html" target="_blank">
                                            Implementation of order-service
                                        </a>
                                    </p>
                                </li>

                                <li>
                                    <p>
                                        <a href="./example-user-service-implementation.html" target="_blank">
                                            Implementation of eureka server
                                        </a>
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <a href="./api-cloud-gateway-implementation.html" target="_blank">
                                            Implementation of Api-gateway
                                        </a>
                                    </p>
                                </li>

                                <li>
                                    <p>
                                        <a href="./example-user-service-implementation.html" target="_blank">
                                            Implementation of user-service
                                        </a>
                                    </p>
                                </li>

                                <li>
                                    <p>
                                        <a href="./example-payment-service-implementation.html" target="_blank">
                                            Implementation of payment-service
                                        </a>
                                    </p>
                                </li>

                                <li>
                                    <p>
                                        <a href="./example-delivery-service-implementation.html" target="_blank">
                                            Implementation of delivery-service
                                        </a>
                                    </p>
                                </li>


                                <li>
                                    <p>
                                        <a href="./microservice-example-test-without-stacksaga.html" target="_blank">
                                            Final application test without using StackSaga
                                        </a>
                                    </p>
                                </li>


                            </ul>
                        </li>

                        <li>
                            <p>
                                Microservice example by using StackSAGA (Imperative way).
                            </p>
                            <ul>

                                <li>
                                    <p>
                                        <a href="./using-stacksaga/stacksaga-spring-boot-microservice-example-with-stacksaga-user-service.html"
                                           target="_blank">
                                            user-service - migration to Saga design pattern
                                        </a>
                                    </p>
                                </li>

                                <li>
                                    <p>
                                        <a href="./using-stacksaga/stacksaga-spring-boot-microservice-example-with-stacksaga-payment-service.html"
                                           target="_blank">
                                            payment-service - migration to Saga design pattern
                                        </a>
                                    </p>
                                </li>

                                <li>
                                    <p>
                                        <a href="./using-stacksaga/stacksaga-spring-boot-microservice-example-with-stacksaga-delivery-service.html"
                                           target="_blank">
                                            delivery-service - migration to Saga design pattern
                                        </a>
                                    </p>
                                </li>

                                <li>
                                    <p>
                                        <a href="./using-stacksaga/stacksaga-spring-boot-microservice-example-with-stacksaga-order-service.html"
                                           target="_blank">
                                            order-service - migration to Saga design pattern
                                        </a>
                                    </p>
                                </li>

                                <li>
                                    <p>
                                        <a href="./using-stacksaga/stacksaga-spring-boot-microservice-example-with-stacksaga.html"
                                           target="_blank">
                                            order-service - migration to Saga design pattern with StackSaga
                                        </a>
                                    </p>
                                </li>

                                <li>
                                    <p>
                                        <a href="./using-stacksaga/stacksaga-spring-boot-microservice-example-test-with-stacksaga.html"
                                           target="_blank">
                                            Final application using StackSaga
                                        </a>
                                    </p>
                                </li>

                            </ul>
                        </li>

                    </ul>

                </section>

            </article>

        </div>
    </div>
</div><!--//docs-wrapper-->


<!-- Javascript -->
<script src="../../../../../assets/plugins/popper.min.js"></script>
<script src="../../../../../assets/plugins/bootstrap/js/bootstrap.min.js"></script>


<!-- Page Specific JS -->
<script src="../../../../../assets/plugins/smoothscroll.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
<script src="../../../../../assets/js/highlight-custom.js"></script>
<script src="../../../../../assets/plugins/simplelightbox/simple-lightbox.min.js"></script>
<script src="../../../../../assets/plugins/gumshoe/gumshoe.polyfills.min.js"></script>
<script src="../../../../../assets/js/docs.js"></script>


</body>
</html> 

