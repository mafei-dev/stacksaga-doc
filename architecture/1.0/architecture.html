<!DOCTYPE html>
<html lang="en">
<head>
    <title>Quick Start - Stack SAGA</title>

    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="description" content="Stack SAGA Quick Start with spring boot microservice.">
    <meta name="author" content="Mafei">
    <link rel="shortcut icon" href="../../favicon.ico">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap" rel="stylesheet">

    <!-- FontAwesome JS-->
    <script defer src="../../assets/fontawesome/js/all.min.js"></script>

    <!-- Plugins CSS -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.2/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="../../assets/plugins/simplelightbox/simple-lightbox.min.css">

    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="../../assets/css/theme.css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LC0M1Q19EK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'G-LC0M1Q19EK');
    </script>
</head>
<body class="docs-page">
<header class="header fixed-top">
    <div class="branding docs-branding">
        <div class="container-fluid position-relative py-2">
            <div class="docs-logo-wrapper">
                <button id="docs-sidebar-toggler" class="docs-sidebar-toggler docs-sidebar-visible me-2 d-xl-none"
                        type="button">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <div class="site-logo"><a class="navbar-brand" href="/index.html"><img class="logo-icon me-2"
                                                                                       src="../../assets/images/coderdocs-logo.svg"
                                                                                       alt="logo"><span
                        class="logo-text">Coder<span class="text-alt">Docs</span></span></a></div>
            </div><!--//docs-logo-wrapper-->
            <div class="docs-top-utilities d-flex justify-content-end align-items-center">
                <div class="top-search-box d-none d-lg-flex">
                    <form class="search-form">
                        <input type="text" placeholder="Search the docs..." name="search"
                               class="form-control search-input">
                        <button type="submit" class="btn search-btn" value="Search"><i class="fas fa-search"></i>
                        </button>
                    </form>
                </div>

                <ul class="social-list list-inline mx-md-3 mx-lg-5 mb-0 d-none d-lg-flex">
                    <li class="list-inline-item"><a href="#"><i class="fab fa-github fa-fw"></i></a></li>
                    <li class="list-inline-item"><a href="#"><i class="fab fa-twitter fa-fw"></i></a></li>
                    <li class="list-inline-item"><a href="#"><i class="fab fa-slack fa-fw"></i></a></li>
                    <li class="list-inline-item"><a href="#"><i class="fab fa-product-hunt fa-fw"></i></a></li>
                </ul><!--//social-list-->
                <a href="https://themes.3rdwavemedia.com/bootstrap-templates/startup/coderdocs-free-bootstrap-5-documentation-template-for-software-projects/"
                   class="btn btn-primary d-none d-lg-flex">Download</a>
            </div><!--//docs-top-utilities-->
        </div><!--//container-->
    </div><!--//branding-->
</header><!--//header-->
<div class="docs-wrapper">
    <div id="docs-sidebar" class="docs-sidebar">
        <div class="top-search-box d-lg-none p-3">
            <form class="search-form">
                <input type="text" placeholder="Search the docs..." name="search" class="form-control search-input">
                <button type="submit" class="btn search-btn" value="Search"><i class="fas fa-search"></i></button>
            </form>
        </div>
        <nav id="docs-nav" class="docs-nav navbar">
            <ul class="section-items list-unstyled nav flex-column pb-3">
                <li class="nav-item section-title"><a class="nav-link scrollto active" href="#section-1"><span
                        class="theme-icon-holder me-2"><i class="fas fa-map-signs"></i></span>Introduction</a></li>
                <li class="nav-item"><a class="nav-link scrollto" href="#item-1-1">Microservice Architecture</a></li>
                <li class="nav-item"><a class="nav-link scrollto" href="#item-1-2">Section Item 1.2</a></li>
                <li class="nav-item"><a class="nav-link scrollto" href="#item-1-3">Section Item 1.3</a></li>
                <li class="nav-item"><a class="nav-link scrollto" href="#item-1-4">Section Item 1.4</a></li>
                <li class="nav-item"><a class="nav-link scrollto" href="#item-1-5">Section Item 1.5</a></li>
                <li class="nav-item"><a class="nav-link scrollto" href="#item-1-6">Section Item 1.6</a></li>

            </ul>

        </nav><!--//docs-nav-->
    </div><!--//docs-sidebar-->

    <div class="docs-content">
        <div class="container">
            <article class="docs-article" id="section-1">
                <header class="docs-header">
                    <h1 class="docs-heading">Introduction <span class="docs-time">Last updated: 2019-06-01</span></h1>
                    <section class="docs-intro">
                        <p>In this section, you will get the architecture of this framework. other than that, you will
                            get
                            what are the limitations you have to face when you are going to use microservice
                            architecture
                            and how overcome those difficulties by using StackSAGA framework.</p>
                    </section><!--//docs-intro-->

                    <!--<h5>Github Code Example:</h5>
                    <p>You can <a class="theme-link" href="https://gist.github.com/" target="_blank">embed your code
                        snippets using Github gists</a></p>
                    <div class="docs-code-block">
                        &lt;!&ndash; ** Embed github code starts ** &ndash;&gt;
                        <script src="https://gist.github.com/xriley/fce6cf71edfd2dadc7919eb9c98f3f17.js"></script>
                        &lt;!&ndash; ** Embed github code ends ** &ndash;&gt;
                    </div>&lt;!&ndash;//docs-code-block&ndash;&gt;

                    <h5>Highlight.js Example:</h5>
                    <p>You can <a class="theme-link" href="https://github.com/highlightjs/highlight.js" target="_blank">embed
                        your code snippets using highlight.js</a> It supports <a class="theme-link"
                                                                                 href="https://highlightjs.org/static/demo/"
                                                                                 target="_blank">185 languages and 89
                        styles</a>.</p>
                    <p>This template uses <a class="theme-link" href="https://highlightjs.org/static/demo/"
                                             target="_blank">Atom One Dark</a> style for the code blocks: <br><code>&#x3C;link
                        rel=&#x22;stylesheet&#x22; href=&#x22;//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.2/styles/atom-one-dark.min.css&#x22;&#x3E;</code>
                    </p>
                    <div class="docs-code-block">
							<pre class="shadow-lg rounded"><code class="json hljs">[
  {
    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"apples"</span>,
    <span class="hljs-attr">"count"</span>: [<span class="hljs-number">12000</span>, <span
                                        class="hljs-number">20000</span>],
    <span class="hljs-attr">"description"</span>: {<span class="hljs-attr">"text"</span>: <span class="hljs-string">"..."</span>, <span
                                        class="hljs-attr">"sensitive"</span>: <span class="hljs-literal">false</span>}
  },
  {
    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"oranges"</span>,
    <span class="hljs-attr">"count"</span>: [<span class="hljs-number">17500</span>, <span
                                        class="hljs-literal">null</span>],
    <span class="hljs-attr">"description"</span>: {<span class="hljs-attr">"text"</span>: <span class="hljs-string">"..."</span>, <span
                                        class="hljs-attr">"sensitive"</span>: <span class="hljs-literal">false</span>}
  }
]


</code></pre>
                    </div>&lt;!&ndash;//docs-code-block&ndash;&gt;


                </header>-->
                    <section class="docs-section" id="item-1-1">
                        <h2 class="section-heading">Microservice Architecture</h2>
                        <p>
                            Before dive in to the framework let's have the basic idea of microservice architecture.
                            <br/>
                            A microservices architecture consists of a collection of small, autonomous services. Each
                            service is self-contained and should implement a single business capability within a bounded
                            context. A bounded context is a natural division within a business and provides an explicit
                            boundary within which a domain model exists.
                        </p>
                        <h5>What are microservices?</h5>
                        <p>Microservices are a modern approach to software whereby application code is delivered in
                            small, manageable pieces, independent of others.
                            <br/>
                            <a href="https://spring.io/microservices">read more through spring microservices.</a>
                        </p>
                        <div>
                            <a target="_blank" href="../../assets/images/architecture/1.0/Slide8.svg"><img
                                    class="img-fluid  "
                                    src="../../assets/images/architecture/1.0/Slide8.svg" alt=""
                                    title="CoderPro Home Page"/></a>
                        </div>

                        <h2>Database per Service Pattern</h2>
                        <p>
                            One of the benefits of microservice architecture is that it lets us choose the technology
                            stack per service. For instance, we can decide to use a relational database for service A
                            and opt for a NoSQL database for service B.

                            This model lets the services manage domain data independently on a data store that best
                            suites its data types and schema. Further, it also lets the service scale its datastores
                            on-demand and insulates it from the failures of other services.

                            However, at times a transaction can span across multiple services, and ensuring data
                            consistency across the service database is a challenge. In the next section, let us examine
                            the challenge of distributed transaction management with an example.
                        </p>

                        <h2>Distributed Transaction</h2>
                        <p>
                            To demonstrate the use of distributed transactions, we’ll take an example of an e-commerce
                            application that processes online orders and is implemented with microservice architecture.
                            There is a microservice to create the orders, one that processes the payment, another that
                            updates the inventory and the last one that delivers the order. Each of these microservices
                            performs a local transaction to implement the individual functionalities:
                        </p>
                        <a target="_blank" href="../../assets/images/architecture/1.0/distributed-transaction.png"><img
                                class="img-fluid  "
                                src="../../assets/images/architecture/1.0/distributed-transaction.png" alt=""
                                title="distributed-transaction"/></a>
                        <p>
                            To ensure a successful order processing service, all four microservices must complete the
                            individual local transactions. If any of the microservice fails to complete its local
                            transaction, all of the completed preceding transactions should roll back to ensure data
                            integrity. This is an example of a distributed transaction as the transaction boundary
                            crosses multiple services and databases.
                        </p>

                        <h2>Challenges of Distributed Transaction</h2>
                        <p>
                            In the previous section, we’ve provided a real-life example of a distributed transaction.
                            Distributed transactions in a microservice architecture pose two key challenges.

                            The first one is maintaining ACID. To ensure the correctness of a transaction, it must be
                            atomic, consistent, isolated, and durable (ACID). The atomicity ensures that all or none of
                            the steps of a transaction should complete. Consistency takes data from one valid state to
                            another valid state. Isolation guarantees that concurrent transactions should produce the
                            same result that sequentially transactions would have produced. Lastly, durability means
                            that committed transactions remain committed irrespective of any type of system failure. In
                            a distributed transaction scenario, as the transaction spans several services, it always
                            remains a key concern to ensure ACID.

                            The second one is managing the transaction isolation level. It specifies the amount of data
                            that is visible in a transaction when the other services access the same data
                            simultaneously. In other words, if one object in one of the microservice is persisted in the
                            database while another request reads the data, should the service return the old or new
                            data?
                        </p>

                    </section><!--//section-->

                    <section class="docs-section" id="item-1-2">
                        <h1 class="section-heading">Introduction to Saga</h1>
                        <h2>What Is Saga Architecture Pattern?</h2>
                        <p>
                            The Saga architecture pattern provides transaction management using a sequence of local
                            transactions. A local transaction is the unit of work performed by a saga participant. Every
                            operation that is part of the Saga can be rolled back by a compensating transaction.
                            Further, the Saga pattern guarantees that either all operations are complete successfully or
                            the corresponding compensation transactions are run to undo the work previously completed.
                            In the Saga pattern, a compensating transaction must be idempotent and retryable. These two
                            principles ensure that a transaction can be managed without any manual intervention. The
                            Saga Execution Coordinator (SEC) ensures guarantees these principles:
                        </p>
                        <a target="_blank" href="../../assets/images/architecture/1.0/compensating-transaction.svg"><img
                                class="img-fluid  "
                                src="../../assets/images/architecture/1.0/compensating-transaction.svg"
                                alt="compensating-transaction"
                                title="compensating-transaction"/></a>
                        <p>The above diagram shows how to visualize the Saga pattern for the previously discussed online
                            order processing scenario.</p>

                    </section><!--//section-->

                    <section class="docs-section" id="item-1-3">
                        <h2 class="section-heading">Classification of SAGA transactions</h2>
                        <p>
                            According to the behaviours of the transaction we can mainly identify 3 transaction types
                            that can be happened when we use saga.
                        </p>

                        <ul>
                            <li>Fully success transaction</li>
                            <li>Rollback/Compensation/Revert success transaction</li>
                            <li>Rollback/Compensation/Revert failed transaction</li>
                        </ul>

                        <br>
                        <h5>01 : Fully success transaction</h5>
                        <div>
                            <a target="_blank" href="../../assets/images/architecture/1.0/transaction-success.svg"><img
                                    class="img-fluid  "
                                    src="../../assets/images/architecture/1.0/transaction-success.svg" alt=""
                                    title="CoderPro Home Page"/></a>
                        </div>
                        <p>
                            As we discussed earlier, we had used number of microservices for doing one single execution.
                            Just assume we have used 5 microservices to be executed and all of them have been worked
                            without any errors. Then there is no revert processes have been executed. That's means, all
                            the microservices are up and running and there haven't been occurred exceptions internally
                            inside each microservice.
                        </p>

                        <br>
                        <h5>02 : Rollback/Compensation/Revert success transaction</h5>
                        <div>
                            <a target="_blank"
                               href="../../assets/images/architecture/1.0/rollback-compensation-revert-success-transaction.svg"><img
                                    class="img-fluid  "
                                    src="../../assets/images/architecture/1.0/rollback-compensation-revert-success-transaction.svg"
                                    alt=""
                                    title="CoderPro Home Page"/></a>
                        </div>
                        <p>
                            In this time, An exception has occurred when one of microservices get execute. Just assume
                            coordinator has been executed 3 microservices successfully but at the 4th one, an error has
                            occurred due to a network exception or whatever internal exception that the microservices
                            has been thrown. Now the coordinator has to execute revert function regarding the all
                            microservices that executed earlier. So the coordinator will start to execute all the revert
                            functions one by one as a sequence. If those revert functions has been executed
                            successfully, this kind of transactions are going to these types. Simply we did a set of
                            transactions but unfortunately got an error but all the revert processes are done
                            successfully.
                        </p>

                        <br>
                        <h5>03 : Rollback/Compensation/Revert failed transaction</h5>
                        <div>
                            <a target="_blank"
                               href="../../assets/images/architecture/1.0/rollback-compensation-revert-failed-transaction.svg"><img
                                    class="img-fluid  "
                                    src="../../assets/images/architecture/1.0/rollback-compensation-revert-failed-transaction.svg"
                                    alt=""
                                    title="CoderPro Home Page"/></a>
                        </div>
                        <p>
                            In this time, the coordinator try to execute the transactions one by one. But while doing
                            the execution, an error get occurred after doing some executions and the coordinator get
                            started to execute all the revert processes that regards to the microservices that
                            previously executed. But unfortunately while doing the revert executions an error get
                            occurred because of a network issues. (Network issues means it can be happened because of
                            there is no endpoint in active at that time or kind of actual network problems)
                        </p>


                    </section><!--//section-->

                    <section class="docs-section" id="item-1-4">
                        <h2 class="section-heading">Section Item 1.4</h2>
                        <p>Vivamus efficitur fringilla ullamcorper. Cras condimentum condimentum mauris, vitae facilisis
                            leo. Aliquam sagittis purus nisi, at commodo augue convallis id. Sed interdum turpis quis
                            felis
                            bibendum imperdiet. Mauris pellentesque urna eu leo gravida iaculis. In fringilla odio in
                            felis
                            ultricies porttitor. Donec at purus libero. Vestibulum libero orci, commodo nec arcu sit
                            amet,
                            commodo sollicitudin est. Vestibulum ultricies malesuada tempor.</p>


                        <h5>Pagination Example:</h5>
                        <nav aria-label="Page navigation example">
                            <ul class="pagination pl-0">
                                <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item"><a class="page-link" href="#">Next</a></li>
                            </ul>
                        </nav>

                        <p>Vivamus efficitur fringilla ullamcorper. Cras condimentum condimentum mauris, vitae facilisis
                            leo. Aliquam sagittis purus nisi, at commodo augue convallis id. Sed interdum turpis quis
                            felis
                            bibendum imperdiet. Mauris pellentesque urna eu leo gravida iaculis. In fringilla odio in
                            felis
                            ultricies porttitor. Donec at purus libero. Vestibulum libero orci, commodo nec arcu sit
                            amet,
                            commodo sollicitudin est. Vestibulum ultricies malesuada tempor.</p>

                    </section><!--//section-->
                    <section class="docs-section" id="item-1-5">
                        <h2 class="section-heading">Section Item 1.5</h2>
                        <p>Vivamus efficitur fringilla ullamcorper. Cras condimentum condimentum mauris, vitae facilisis
                            leo. Aliquam sagittis purus nisi, at commodo augue convallis id. Sed interdum turpis quis
                            felis
                            bibendum imperdiet. Mauris pellentesque urna eu leo gravida iaculis. In fringilla odio in
                            felis
                            ultricies porttitor. Donec at purus libero. Vestibulum libero orci, commodo nec arcu sit
                            amet,
                            commodo sollicitudin est. Vestibulum ultricies malesuada tempor.</p>
                    </section><!--//section-->
                    <section class="docs-section" id="item-1-6">
                        <h2 class="section-heading">Section Item 1.6</h2>
                        <p>Vivamus efficitur fringilla ullamcorper. Cras condimentum condimentum mauris, vitae facilisis
                            leo. Aliquam sagittis purus nisi, at commodo augue convallis id. Sed interdum turpis quis
                            felis
                            bibendum imperdiet. Mauris pellentesque urna eu leo gravida iaculis. In fringilla odio in
                            felis
                            ultricies porttitor. Donec at purus libero. Vestibulum libero orci, commodo nec arcu sit
                            amet,
                            commodo sollicitudin est. Vestibulum ultricies malesuada tempor.</p>
                    </section><!--//section-->

            </article>
        </div>
    </div>
</div>
<!-- Javascript -->
<script src="../../assets/plugins/popper.min.js"></script>
<script src="../../assets/plugins/bootstrap/js/bootstrap.min.js"></script>


<!-- Page Specific JS -->
<script src="../../assets/plugins/smoothscroll.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
<script src="../../assets/js/highlight-custom.js"></script>
<script src="../../assets/plugins/simplelightbox/simple-lightbox.min.js"></script>
<script src="../../assets/plugins/gumshoe/gumshoe.polyfills.min.js"></script>
<script src="../../assets/js/docs.js"></script>
</body>
</html> 

