<!DOCTYPE html>
<html lang="en">
<head>
    <title>Architecture - StackSaga</title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="description" content="Stack SAGA Quick Start with spring boot microservice.">
    <meta name="author" content="Mafei">


    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="180x180" href="./../../assets/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./../../assets/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./../../assets/fav/favicon-16x16.png">
    <link rel="manifest" href="./../../assets/fav/site.webmanifest">
    <link rel="mask-icon" href="./../../assets/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="apple-mobile-web-app-title" content="stacksaga">
    <meta name="application-name" content="stacksaga">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#28b76b">


    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap" rel="stylesheet">

    <!-- FontAwesome JS-->
    <script defer src="../../assets/fontawesome/js/all.min.js"></script>

    <!-- Plugins CSS -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.2/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="../../assets/plugins/simplelightbox/simple-lightbox.min.css">

    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="../../assets/css/theme.css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LC0M1Q19EK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'G-LC0M1Q19EK');
    </script>

</head>
<body class="docs-page">
<header class="header fixed-top">
    <div class="branding docs-branding">
        <div class="container-fluid position-relative py-2">
            <div class="docs-logo-wrapper">
                <!--  <button id="docs-sidebar-toggler" class="docs-sidebar-toggler docs-sidebar-visible me-2 d-xl-none"
                          type="button">
                      <span></span>
                      <span></span>
                      <span></span>
                  </button>
  -->
                <div class="site-logo">
                    <a class="navbar-brand" href="../../index.html">
                        <img width="8%" height="8%" src="../../assets/images/stack-saga-icon.svg"
                             alt="logo"/>
                        <span class="logo-text">Stack<span class="text-alt">SAGA</span></span>
                    </a>
                </div>

            </div><!--//docs-logo-wrapper-->
            <div class="docs-top-utilities d-flex justify-content-end align-items-center">
                <!--                <div class="top-search-box d-none d-lg-flex">
                                    <form class="search-form">
                                        <input type="text" placeholder="Search the docs..." name="search"
                                               class="form-control search-input">
                                        <button type="submit" class="btn search-btn" value="Search"><i class="fas fa-search"></i>
                                        </button>
                                    </form>
                                </div>-->

                <ul class="social-list list-inline mx-md-3 mx-lg-5 mb-0 d-none d-lg-flex">
                    <li class="list-inline-item"><a href="https://github.com/stacksaga"><i
                            class="fab fa-github fa-fw"></i></a></li>
                    <li class="list-inline-item"><a href="https://stackoverflow.com/questions/tagged/stacksaga"><i
                            class="fab fa-stack-overflow fa-fw"></i></a></li>
                </ul><!--//social-list-->
            </div><!--//docs-top-utilities-->
        </div><!--//container-->
    </div><!--//branding-->
</header><!--//header-->
<div>
    <div class="container">
        <article class="docs-article" id="section-1">

            <header class="docs-header">
                <h1 id="diagram" class="docs-heading">
                    StackSaga in High-level
                </h1>
                <section class="docs-intro">
                    <p>
                        in the <a href="./introduction.html">introduction</a>, we got a clear idea of how
                        microservice
                        architecture works and what are the challenges that we have to face when implementing the
                        microservice. here, we are going to explain how the stack saga works together with typical
                        microservice architecture. here we have demonstrated a spring boot microservice architecture
                        and
                        how the StackSaga framework provides the Saga execution coordinator (SEC) capabilities
                        without
                        bothering to the default architecture.
                    </p>
                    <a target="_blank"
                       href="../../assets/images/architecture/1.0/stack-saga-high-level-diagram.svg"><img
                            class="img-fluid  "
                            src="../../assets/images/architecture/1.0/stack-saga-high-level-diagram.svg"
                            alt=""
                            title="stackSAGA High-level architecture diagram"/>
                    </a>

                    <p>
                        After adding stack saga in the microservice architecture you can see there are some
                        additional
                        components in the high-level architecture diagram. in the diagram, the <b>gray colour</b>
                        components
                        and lines are related to the <b>general microservice architecture</b> and additional <b>stacksaga
                        related
                        components and
                        lines</b> have been coloured by <b>green colour</b>. Let's discuss all the components
                        and
                        how they are interacted with general architecture. When you use StackSaga, you have to
                        provide
                        the facilities to create a database in addition to the database that you use for each
                        microservice. This is also the same as the database per service design pattern. A service group
                        (multiple
                        instances of one service) uses one database to store the events of the executions. The only
                        thing
                        is newly added an <b>extra schema</b>. If you like to use one database for all microservices for
                        StackSaga, it doesn't matter <b>you can use one database as the event-store</b>. But as a best
                        practice, one database per
                        service is recommended.
                    </p>
                    <p>
                        As a summary of the image above, you can identify mainly 4 components as new.in the next image
                        below you can see those new component how interact with the general components.
                    </p>

                    <ul>
                        <li><b><a href="reference/stacksaga-framework.html#coordinator">StackSaga
                            Coordinator</a></b>
                            (A Library) and
                            <b><a href="reference/stacksaga-framework.html#connector">StackSaga
                                Connector</a></b> (A Library) are located in the
                            individual
                            services.
                        </li>
                        <li><b><a href="reference/stacksaga-framework.html#shield">StackSaga Shield</a></b> (A
                            Library) is located in the API gateway.
                        </li>
                        <li><b><a href="./../1.0/topics/stacksaga-admin-dashboard.html">StackSaga Server</a></b> (A
                            Standalone Application) is one separate unit that provides a
                            dashboard.
                        </li>

                    </ul>

                    <a target="_blank"
                       href="../../assets/images/architecture/1.0/Architecture-Stacksaga-products.drawio.svg"><img
                            class="img-fluid  "
                            src="../../assets/images/architecture/1.0/Architecture-Stacksaga-products.drawio.svg"
                            alt=""
                            title="stackSAGA High-level architecture diagram"/>
                    </a>
                </section><!--//docs-intro-->

            </header>

            <section class="docs-section">
                <h4>Key Processes of ecosystem</h4>
                <p>
                    To understand the relation of those components whole process can be summarised as follows.
                </p>
                <ul>
                    <li>
                        <b>Initialize the admin server with super admin.</b>
                        <p>
                            As the first step, you have to create initialize
                            the admin server. <a
                                href="./topics/stacksaga-admin-dashboard.html#initialize-stacksaga-admin-server">see the
                            initialization steps</a>.
                        </p>
                    </li>
                    <li>
                        <b>Register API gateways with admin server</b>
                        <p>
                            To connect the StackSaga your API gateway should provide an API-gateway-user credentials.
                            Therefore, super Admin should create a user with API gateway authorization (role).
                            After creating the API gateway user, the api gateway can be run because StackSaga Shield wll
                            check your credentials connecting with the admin server.
                            <br>
                            For this process <b>StackSaga server</b> and <b>StackSaga Shield</b> were involved.
                            <a
                                    href="./example/mysql/imperative/">see
                                the
                                implementation</a> to see more in detail.
                        </p>
                    </li>
                    <li>
                        <b>Register each microservice with admin server.</b>
                        <p>
                            To register the services in the admin server, the super admin or admin has to create a user
                            for service with service privileges. As a best-practice the StackSaga team recommends you to
                            create one user for one service group. (service group can have multiple instances but the
                            service names are the same.) For instance, order-service should have a service user called
                            order-service-general-user. And payment service should have a service user called
                            payment-service-general-user. At the start-up the connector will verify your service
                            credentials and let you the access to register and run the service.
                            <br>
                            For this process
                            <b>StackSaga Server</b>, and <b>StackSaga Connector</b> were involved.
                            <a
                                    href="./example/mysql/imperative/">see
                                the
                                implementation</a> to see more in detail.
                        </p>
                    </li>

                    <li>
                        <b>Execute a transaction.</b>
                        <p>
                            This is the main part that you are willing to see. The request comes through the API gateway
                            as usual, and the StackSaga coordinator will obtain the request data that you pass, and the
                            coordinator will handle all the process and executions as you have guided the framework.
                            <br>
                            For this process only <b>StackSaga coordinator</b> was involved.
                        </p>

                        <a
                                href="./example/mysql/imperative/">see
                            the
                            implementation</a> to see more in detail.
                    </li>

                    <li>
                        <b>Seeing transactions execution data.</b>
                        <p>
                            To see tha execution data you should have to have a user account on the admin server. If you
                            are the super admin, the super admin can see all the details. But as a best-practice, make
                            sure to create a separate individual account for each user that wat to access the admin
                            server to see the transaction data. After login to the dashboard, you have to give the
                            access
                            path of the API gateway that you want to access the services. you will be able to see the
                            transaction data.
                            <br>
                            For this process, <b>StackSaga server</b>, <b>StackSaga Shield</b> and <b>StackSaga
                            Connector</b> were involved.
                        </p>
                        <a
                                href="./example/mysql/imperative/">see
                            the
                            implementation</a> to see more in detail.
                    </li>


                </ul>
            </section>
            <section class="docs-section" id="item-1-4">
                <h4>Explore the concepts behind stackSaga</h4>
                <ul>
                    <li><a href="./introduction.html">Introduction</a></li>
                    <li><a href="./architecture.html">High-level Architecture</a></li>
                    <li><a href="./how-works-stack-saga-transaction-types.html">How Stack Saga Execution Types
                        work</a>
                    </li>
                    <li><a href="./topics/SEC.html">Saga execution coordinator (SEC)</a></li>
                    <li><a href="./topics/SEC.html#dual-consistency-problem-of-sec">Dual-consistency problem of
                        SEC</a></li>

                    <li><a href="./topics/circuit-breaker.html">Real-time Circuit Breaker</a></li>
                    <li><a href="./topics/SEC.html#event-store">Event-Store</a></li>

                    <li><a target="_blank" href="./topics/aggregator.html">Aggregator</a></li>
                    <li><a target="_blank" href="./topics/executor.html">Executor</a></li>
                    <li><a target="_blank" href="./topics/handler.html">Handlers</a></li>
                    <li><a target="_blank" href="./topics/retryable-exception-vs-non-retryable-exception.html">Retryable
                        Exceptions</a></li>
                    <li><a href="./topics/hint-store.html">Hint store</a></li>
                    <li><a href="./topics/stacksaga-admin-dashboard.html">StackSaga Admin</a></li>
                </ul>

            </section>
        </article>

    </div>
</div>

<!-- Javascript -->
<script src="../../assets/plugins/popper.min.js"></script>
<script src="../../assets/plugins/bootstrap/js/bootstrap.min.js"></script>


<!-- Page Specific JS -->
<script src="../../assets/plugins/smoothscroll.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
<script src="../../assets/js/highlight-custom.js"></script>
<script src="../../assets/plugins/simplelightbox/simple-lightbox.min.js"></script>
<script src="../../assets/plugins/gumshoe/gumshoe.polyfills.min.js"></script>
<script src="../../assets/js/docs.js"></script>
</body>
</html> 

